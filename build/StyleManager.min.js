(function(e,t){typeof define=="function"&&define.amd?define(t):e.StyleManager=t()})(this,function(){var e=function(e){return e.join("\n")},t=function(t,n){var r=[];return r.push("/* Source: "+t+" */"),r.push(n),e(r)},n=function(){};n.prototype.name=function(e){if(!e)return this.el.id||!1;this.el.id=e},n.prototype.clean=function(){var e;while(this.el.firstChild)e=this.el.firstChild,this.el.removeChild(e)},n.prototype.getElement=function(){return this.el};var r=function(){var e;this.el=document.createElement("style"),e=document.getElementsByTagName("head")[0],e.appendChild(this.el)};r.prototype=new n,r.prototype.render=function(e,t){var n,r;while(t.length>0)n=t.length-1,r=e[t[n]],r.previous&&this.el.removeChild(r.previous.node),this.el.appendChild(r.node),t.splice(n,1)};var i=function(){this.el=document.createStyleSheet()};i.prototype=new n,i.prototype.render=function(t,n){var r=[],i;for(i in t)r.push(t[i].source);r=e(r),this.clean(),this.el.cssText=r};var s=function(e){this.setRenderer(e),this.stylesheets={},this.changed=[]};return s.prototype.setRenderer=function(e){document.createStyleSheet?this.renderer=new i:this.renderer=new r,this.renderer.name(e)},s.prototype.register=function(e,n){var r=!1;return n=t(e,n),this.changed.push(e),this.stylesheets[e]&&(r=this.stylesheets[e]),this.stylesheets[e]={source:n,node:document.createTextNode(n)},this.stylesheets[e].previous=r,this.render(),this},s.prototype.name=function(e){return this.renderer.name(e)},s.prototype.clean=function(){this.renderer.clean()},s.prototype.render=function(){return this.renderer.render(this.stylesheets,this.changed),this},s.prototype.getRenderer=function(){return this.renderer},s});